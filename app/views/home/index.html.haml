- content_for :stuff do
  = simple_form_for Upload.new do |f|
    = f.input :report, :label => false 


- if @books.blank?
  .introduction You didn't upload any report yet
- else
  - vendors = Vendor.all
  .books
    - @books.each do |book|
      .book{ title: %Q{#{book.title}} }
        .info
          .title
            %h1= book.title
        - report = Indie::Report.create(book)
        .months
          %h2 The Last Six Month
          .barchart
            = barchart(210, report.months)
          .month
            %h2 The Last Six Month
            .vendors
              - vendors.each do |vendor|
                .vendor
                  = "#{vendor.name}: #{book.sales.for_vendor(vendor.name).sum(:units)}"
            .total
              total: #{book.sales.sum(:units)}
          - report.months.each do |month|
            .month{ title: "#{month.title}", :class => "#{month.name}", style: "display: none;" }
              %h2= month.name
              .vendors
                - month.vendors.each do |vendor|
                  .vendor
                    #{vendor.name}: #{vendor.units} 
              .total
                total: #{month.units}
        .totals
          %h2 The Entire Period
          .vendors
            - vendors.each do |vendor|
              .vendor
                = "#{vendor.name}: #{book.sales.for_vendor(vendor.name).sum(:units)}"
          .total
            total: #{book.sales.sum(:units)}
